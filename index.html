<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Passphrasen-Generator | FRS GmbH & Co. KG</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700;900&family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;700&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* Light Mode (Default) */
        :root {
            --bg-page: #f8f9fa;
            --bg-card: #ffffff;
            --bg-input: #f8f9fa;
            --bg-output: #f1f3f5;
            --accent: #e53935;
            --accent-hover: #c62828;
            --accent-light: rgba(229, 57, 53, 0.1);
            --text-primary: #31363a;
            --text-secondary: #6b7277;
            --text-muted: #9ca3af;
            --border: #d2d7da;
            --border-light: #e5e7eb;
            --shadow-sm: 0 1px 2px rgba(0,0,0,0.05);
            --shadow: 0 2px 8px rgba(0,0,0,0.08);
            --shadow-lg: 0 4px 16px rgba(0,0,0,0.1);
            --btn-shadow: none;
            --font-family: 'Lato', -apple-system, BlinkMacSystemFont, sans-serif;
            --radius: 8px;
        }

        /* Dark Mode */
        [data-theme="dark"] {
            --bg-page: #0a0a0b;
            --bg-card: #141416;
            --bg-input: #1c1c1f;
            --bg-output: #1c1c1f;
            --accent: #e53935;
            --accent-hover: #ef5350;
            --accent-light: rgba(229, 57, 53, 0.15);
            --text-primary: #fafafa;
            --text-secondary: #a1a1aa;
            --text-muted: #52525b;
            --border: #27272a;
            --border-light: #27272a;
            --shadow-sm: none;
            --shadow: none;
            --shadow-lg: none;
            --btn-shadow: 0 4px 16px rgba(229, 57, 53, 0.3);
            --font-family: 'Lato', -apple-system, BlinkMacSystemFont, sans-serif;
            --radius: 16px;
        }

        body {
            font-family: var(--font-family);
            background: var(--bg-page);
            color: var(--text-primary);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2rem 1rem;
            line-height: 1.5;
            -webkit-font-smoothing: antialiased;
            transition: background 0.3s ease, color 0.3s ease;
        }

        .container {
            width: 100%;
            max-width: 540px;
        }

        header {
            text-align: center;
            margin-bottom: 2rem;
            position: relative;
        }

        .theme-toggle {
            position: absolute;
            top: 0;
            right: 0;
            width: 40px;
            height: 40px;
            border: 1px solid var(--border);
            border-radius: 8px;
            background: var(--bg-card);
            color: var(--text-secondary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .theme-toggle:hover {
            border-color: var(--accent);
            color: var(--accent);
        }

        .theme-toggle svg {
            width: 20px;
            height: 20px;
            fill: currentColor;
        }

        .theme-toggle .icon-sun,
        .theme-toggle .icon-moon {
            display: none;
        }

        [data-theme="light"] .theme-toggle .icon-moon {
            display: block;
        }

        [data-theme="dark"] .theme-toggle .icon-sun {
            display: block;
        }

        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.875rem;
            margin-bottom: 0.75rem;
        }

        .logo-icon {
            width: 44px;
            height: 44px;
            background: var(--accent);
            border-radius: calc(var(--radius) - 2px);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
        }

        .logo-icon svg {
            width: 24px;
            height: 24px;
            fill: white;
        }

        h1 {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-primary);
            letter-spacing: -0.01em;
        }

        .subtitle {
            color: var(--text-secondary);
            font-size: 0.9rem;
            font-weight: 400;
        }

        .card {
            background: var(--bg-card);
            border: 1px solid var(--border-light);
            border-radius: var(--radius);
            padding: 1.5rem;
            margin-bottom: 1rem;
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
        }

        .output-area {
            background: var(--bg-output);
            border: 2px solid var(--border);
            border-radius: calc(var(--radius) - 2px);
            padding: 1.25rem 1rem;
            min-height: 72px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1.25rem;
            position: relative;
            cursor: pointer;
            transition: all 0.15s ease;
        }

        .output-area:hover {
            border-color: var(--accent);
            background: var(--accent-light);
        }

        .output-area.copied {
            border-color: var(--accent);
            background: var(--accent-light);
        }

        #passphrase {
            font-family: 'JetBrains Mono', 'Consolas', monospace;
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--text-primary);
            text-align: center;
            word-break: break-word;
            line-height: 1.6;
            letter-spacing: 0.01em;
        }

        #passphrase .separator,
        #passphrase .number {
            color: var(--accent);
        }

        .placeholder {
            color: var(--text-muted);
            font-style: normal;
            font-weight: 400;
        }

        .copy-hint {
            position: absolute;
            bottom: 0.375rem;
            right: 0.5rem;
            font-size: 0.7rem;
            color: var(--text-muted);
            opacity: 0;
            transition: opacity 0.15s ease;
        }

        .output-area:hover .copy-hint {
            opacity: 1;
        }

        .copied-toast {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--accent);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            font-size: 0.85rem;
            font-weight: 600;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.15s ease;
            box-shadow: var(--shadow);
        }

        .copied-toast.show {
            opacity: 1;
        }

        .controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .control-group {
            display: flex;
            flex-direction: column;
            gap: 0.375rem;
        }

        label {
            font-size: 0.75rem;
            font-weight: 700;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.04em;
        }

        select, input[type="text"] {
            font-family: var(--font-family);
            font-size: 0.9rem;
            padding: 0.625rem 0.75rem;
            background: var(--bg-input);
            border: 1px solid var(--border);
            border-radius: calc(var(--radius) / 2);
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.15s ease;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='%236b7277' viewBox='0 0 16 16'%3E%3Cpath d='M8 11L3 6h10l-5 5z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 0.75rem center;
            padding-right: 2rem;
        }

        [data-theme="dark"] select {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='%23a1a1aa' viewBox='0 0 16 16'%3E%3Cpath d='M8 11L3 6h10l-5 5z'/%3E%3C/svg%3E");
        }

        select:hover, input[type="text"]:hover {
            border-color: var(--text-secondary);
        }

        select:focus, input[type="text"]:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px var(--accent-light);
        }

        select:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 0.625rem;
            padding: 0.5rem 0;
        }

        .checkbox-wrapper {
            position: relative;
            width: 18px;
            height: 18px;
            flex-shrink: 0;
        }

        .checkbox-wrapper input {
            opacity: 0;
            width: 100%;
            height: 100%;
            position: absolute;
            cursor: pointer;
            z-index: 1;
        }

        .checkbox-custom {
            position: absolute;
            top: 0;
            left: 0;
            width: 18px;
            height: 18px;
            background: var(--bg-input);
            border: 2px solid var(--border);
            border-radius: 3px;
            transition: all 0.15s ease;
        }

        .checkbox-wrapper input:hover + .checkbox-custom {
            border-color: var(--accent);
        }

        .checkbox-wrapper input:checked + .checkbox-custom {
            background: var(--accent);
            border-color: var(--accent);
        }

        .checkbox-custom::after {
            content: '';
            position: absolute;
            left: 5px;
            top: 1px;
            width: 5px;
            height: 10px;
            border: solid white;
            border-width: 0 2px 2px 0;
            transform: rotate(45deg);
            opacity: 0;
            transition: opacity 0.15s ease;
        }

        .checkbox-wrapper input:checked + .checkbox-custom::after {
            opacity: 1;
        }

        .checkbox-label {
            font-size: 0.875rem;
            color: var(--text-primary);
            cursor: pointer;
        }

        .btn {
            font-family: var(--font-family);
            font-size: 0.95rem;
            font-weight: 700;
            padding: 0.875rem 1.5rem;
            border: none;
            border-radius: calc(var(--radius) / 2);
            cursor: pointer;
            transition: all 0.15s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.03em;
        }

        .btn-primary {
            background: var(--accent);
            color: white;
            width: 100%;
            box-shadow: var(--btn-shadow);
        }

        .btn-primary:hover {
            background: var(--accent-hover);
        }

        .btn-primary:active {
            transform: translateY(1px);
        }

        .btn-primary svg {
            width: 18px;
            height: 18px;
            fill: currentColor;
        }

        .entropy-bar {
            margin-top: 1.25rem;
            padding-top: 1rem;
            border-top: 1px solid var(--border-light);
        }

        .entropy-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .entropy-label {
            font-size: 0.7rem;
            font-weight: 700;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.04em;
        }

        .entropy-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            color: var(--accent);
            font-weight: 700;
        }

        .entropy-track {
            height: 6px;
            background: var(--bg-output);
            border-radius: 3px;
            overflow: hidden;
        }

        .entropy-fill {
            height: 100%;
            background: linear-gradient(90deg, #f59e0b 0%, var(--accent) 60%, #22c55e 100%);
            border-radius: 3px;
            transition: width 0.25s ease;
        }

        .info-section {
            background: var(--bg-card);
            border: 1px solid var(--border-light);
            border-radius: var(--radius);
            padding: 1rem 1.25rem;
            box-shadow: var(--shadow-sm);
            transition: all 0.3s ease;
        }

        .info-title {
            font-size: 0.7rem;
            font-weight: 700;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.04em;
            margin-bottom: 0.625rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .info-title svg {
            width: 14px;
            height: 14px;
            fill: var(--accent);
        }

        .info-list {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: 0.375rem;
        }

        .info-list li {
            font-size: 0.8rem;
            color: var(--text-secondary);
            display: flex;
            align-items: flex-start;
            gap: 0.5rem;
            line-height: 1.4;
        }

        .info-list li::before {
            content: '';
            width: 6px;
            height: 6px;
            background: var(--accent);
            border-radius: 50%;
            flex-shrink: 0;
            margin-top: 0.4em;
        }

        footer {
            margin-top: 1.5rem;
            text-align: center;
            color: var(--text-muted);
            font-size: 0.75rem;
        }

        footer a {
            color: var(--accent);
            text-decoration: none;
        }

        footer a:hover {
            text-decoration: underline;
        }

        .branding {
            font-size: 0.7rem;
            color: var(--text-muted);
            margin-top: 0.5rem;
        }

        @media (max-width: 480px) {
            .controls {
                grid-template-columns: 1fr;
            }

            #passphrase {
                font-size: 1.1rem;
            }

            h1 {
                font-size: 1.25rem;
            }

            .card {
                padding: 1.25rem;
            }

            .theme-toggle {
                position: static;
                margin: 0 auto 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <button class="theme-toggle" id="themeToggle" onclick="toggleTheme()" title="Farbschema wechseln">
                <svg class="icon-sun" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 1 0 0 10 5 5 0 0 0 0-10zm0-5a1 1 0 0 1 1 1v2a1 1 0 1 1-2 0V3a1 1 0 0 1 1-1zm0 18a1 1 0 0 1 1 1v2a1 1 0 1 1-2 0v-2a1 1 0 0 1 1-1zm9-9a1 1 0 0 1-1 1h-2a1 1 0 1 1 0-2h2a1 1 0 0 1 1 1zM6 12a1 1 0 0 1-1 1H3a1 1 0 1 1 0-2h2a1 1 0 0 1 1 1zm12.364-5.364a1 1 0 0 1 0 1.414l-1.414 1.414a1 1 0 1 1-1.414-1.414l1.414-1.414a1 1 0 0 1 1.414 0zM8.464 17.95a1 1 0 0 1 0 1.414l-1.414 1.414a1 1 0 1 1-1.414-1.414l1.414-1.414a1 1 0 0 1 1.414 0zm9.9 1.414a1 1 0 0 1-1.414 0l-1.414-1.414a1 1 0 1 1 1.414-1.414l1.414 1.414a1 1 0 0 1 0 1.414zM6.636 8.464a1 1 0 0 1-1.414 0L3.808 7.05a1 1 0 0 1 1.414-1.414L6.636 7.05a1 1 0 0 1 0 1.414z"/></svg>
                <svg class="icon-moon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 3a9 9 0 1 0 9 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 0 1-4.4 2.26 5.403 5.403 0 0 1-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"/></svg>
            </button>
            <div class="logo">
                <div class="logo-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 1C8.676 1 6 3.676 6 7v2H4v14h16V9h-2V7c0-3.324-2.676-6-6-6zm0 2c2.276 0 4 1.724 4 4v2H8V7c0-2.276 1.724-4 4-4zm-6 8h12v10H6V11zm6 3a2 2 0 0 0-1 3.732V20h2v-2.268A2 2 0 0 0 12 14z"/></svg>
                </div>
                <h1>Passphrasen-Generator</h1>
            </div>
            <p class="subtitle">Sichere, merkbare Passwörter – komplett offline</p>
        </header>

        <div class="card">
            <div class="output-area" id="outputArea" onclick="copyToClipboard()">
                <div id="passphrase"><span class="placeholder">Klicke auf „Generieren"</span></div>
                <span class="copy-hint">Klicken zum Kopieren</span>
                <div class="copied-toast" id="copiedToast">Kopiert!</div>
            </div>

            <div class="controls">
                <div class="control-group">
                    <label for="wordCount">Anzahl Wörter</label>
                    <select id="wordCount">
                        <option value="3">3 Wörter</option>
                        <option value="4" selected>4 Wörter</option>
                        <option value="5">5 Wörter</option>
                        <option value="6">6 Wörter</option>
                    </select>
                </div>

                <div class="control-group">
                    <label for="separator">Trennzeichen</label>
                    <select id="separator">
                        <option value="-">Bindestrich ( - )</option>
                        <option value=".">Punkt ( . )</option>
                        <option value="_">Unterstrich ( _ )</option>
                        <option value=",">Komma ( , )</option>
                        <option value="/">Schrägstrich ( / )</option>
                        <option value="+">Plus ( + )</option>
                        <option value="*">Stern ( * )</option>
                        <option value="#">Raute ( # )</option>
                        <option value="!">Ausrufezeichen ( ! )</option>
                        <option value="=">Gleichzeichen ( = )</option>
                        <option value=":">Doppelpunkt ( : )</option>
                        <option value=";">Semikolon ( ; )</option>
                        <option value=" ">Leerzeichen</option>
                    </select>
                </div>
            </div>

            <div class="checkbox-group">
                <div class="checkbox-wrapper">
                    <input type="checkbox" id="addNumber" checked>
                    <div class="checkbox-custom"></div>
                </div>
                <label class="checkbox-label" for="addNumber">Zahl am Ende hinzufügen (00-99)</label>
            </div>

            <div class="checkbox-group">
                <div class="checkbox-wrapper">
                    <input type="checkbox" id="randomSeparator" checked>
                    <div class="checkbox-custom"></div>
                </div>
                <label class="checkbox-label" for="randomSeparator">Zufälliges Trennzeichen (+3.7 Bit)</label>
            </div>

            <div class="checkbox-group">
                <div class="checkbox-wrapper">
                    <input type="checkbox" id="capitalize" checked>
                    <div class="checkbox-custom"></div>
                </div>
                <label class="checkbox-label" for="capitalize">Wörter groß schreiben</label>
            </div>

            <button class="btn btn-primary" onclick="generate()">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17.65 6.35A7.958 7.958 0 0 0 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0 1 12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/></svg>
                Generieren
            </button>

            <div class="entropy-bar">
                <div class="entropy-header">
                    <span class="entropy-label">Sicherheit (Entropie)</span>
                    <span class="entropy-value" id="entropyValue">-- Bit</span>
                </div>
                <div class="entropy-track">
                    <div class="entropy-fill" id="entropyFill" style="width: 0%"></div>
                </div>
            </div>
        </div>

        <div class="info-section">
            <div class="info-title">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/></svg>
                Sicherheitshinweise
            </div>
            <ul class="info-list">
                <li>Läuft komplett lokal – keine Daten werden übertragen</li>
                <li>Nutzt kryptografisch sicheren Zufall (crypto.getRandomValues)</li>
                <li>2048 Wörter = 11 Bit/Wort, Zahl = 6.6 Bit, Trennzeichen = 3.7 Bit</li>
                <li>4 Wörter + Zahl + Trennzeichen = ~55 Bit Entropie</li>
            </ul>
        </div>

        <footer>
            Quellcode einsehbar · Keine Cookies · Kein Tracking
            <div class="branding">FRS GmbH & Co. KG</div>
        </footer>
    </div>

    <script>
        // Theme Management
        function getSystemTheme() {
            return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
        }

        function getStoredTheme() {
            return localStorage.getItem('theme');
        }

        function setTheme(theme) {
            document.documentElement.setAttribute('data-theme', theme);
            localStorage.setItem('theme', theme);
        }

        function toggleTheme() {
            const current = document.documentElement.getAttribute('data-theme');
            const next = current === 'dark' ? 'light' : 'dark';
            setTheme(next);
        }

        // Initialize theme
        (function() {
            const stored = getStoredTheme();
            const theme = stored || getSystemTheme();
            setTheme(theme);

            // Listen for system theme changes
            window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
                if (!getStoredTheme()) {
                    setTheme(e.matches ? 'dark' : 'light');
                }
            });
        })();

        // Deutsche Wortliste: 2048 einfache, gut merkbare Nomen (11 Bit pro Wort)
        const wordlist = [
            "affe","ampel","anker","apfel","arzt","auge","auto","bach","ball","bank","baum","berg","bett","bier","bild","birne",
            "blatt","blitz","blume","boot","brille","brot","bruch","brust","buch","busch","butter","couch","dach","daumen","decke","diamant",
            "dieb","dorf","dose","drache","draht","durst","dusche","eiche","eimer","eis","eisen","elch","engel","ente","erbe","erde",
            "esel","eule","fabrik","faden","fahne","falke","farbe","fass","faust","feder","feier","feige","feld","fels","fenster","feuer",
            "fichte","film","finger","fisch","flasche","fleck","fleisch","fliege","floss","flug","flur","fluss","forst","foto","frosch","frucht",
            "fuchs","funke","gabel","gang","gans","garten","gast","geist","geld","gemse","geruch","gesang","gift","gipfel","glas","gleis",
            "glocke","glut","gold","grab","graben","gras","griff","grund","gurke","gurt","haare","hafen","hagel","hahn","hai","haken",
            "halle","hals","hammer","hand","hase","haupt","haus","haut","hecht","hecke","hemd","henne","herbst","herd","herz","heu",
            "hexe","himmel","hirsch","hitze","hobel","hof","holz","honig","horn","hose","hotel","hund","hunger","hut","igel","insel",
            "jacke","jagd","junge","kabel","kaffee","kaiser","kalb","kammer","kampf","kanal","kante","karte","katze","keller","kern","kerze",
            "kette","keule","kiefer","kind","kinn","kino","kirche","kirsche","kiste","kittel","klang","klee","kleid","klippe","klotz","kneipe",
            "knie","knopf","knoten","koch","koffer","kohl","kohle","kopf","korb","korn","kraft","kragen","kralle","kran","kranz","kraut",
            "krebs","kreide","kreis","kreuz","krieg","krone","kuchen","kugel","kuh","kunst","kupfer","lachs","laden","lager","lamm","lampe",
            "land","lanze","lappen","last","laub","lauch","laus","lava","leber","leder","lehm","lehrer","leib","leiche","leim","leine",
            "leiter","licht","lied","linde","linie","linse","lippe","liste","loch","locke","lotus","luft","lunge","magen","magnet","mais",
            "mann","mantel","markt","mast","matte","mauer","maus","meer","mehl","meise","meister","menge","messer","metall","milch","minze",
            "mitte","monat","mond","moos","motor","motte","mulde","mund","muschel","muster","mutter","nagel","name","narbe","nase","nebel",
            "nelke","nest","netz","niere","niete","nixe","nonne","note","nudel","nuss","oase","ofen","ohr","olive","onkel","oper",
            "orange","orden","orgel","ort","osten","otter","paar","palast","palme","panda","panik","papst","park","paste","pater","pauke",
            "perle","pfahl","pfand","pfanne","pfarrer","pfau","pfeffer","pfeife","pfeil","pferd","pflanze","pflaster","pflaume","pforte","pfote","pfund",
            "pilz","pinsel","pirat","plakat","plane","platz","pollen","polster","pommes","pony","posten","pracht","preis","prinz","probe","pudel",
            "puder","pullover","puls","pulver","pumpe","punkt","puppe","qualle","qualm","quark","quelle","quitte","rabe","rachen","rad","rahmen",
            "rakete","rand","ranke","rasen","ratte","rauch","raum","raupe","rebe","regal","regen","reh","reich","reifen","reihe","reis",
            "reise","reiter","riegel","riese","riff","rind","ring","rippe","riss","ritter","robbe","rock","roggen","rohr","rolle","rose",
            "rost","ruder","rumpf","runde","saal","saat","sack","saft","sage","sahne","salat","salbe","salz","samen","sand","sattel",
            "schach","schaf","schal","schale","schalter","schatten","schatz","schaum","scheibe","schere","scheune","schicht","schiff","schild","schimmel","schinken",
            "schirm","schlaf","schlange","schlauch","schleife","schloss","schlucht","schluss","schmied","schnabel","schnecke","schnee","schnitt","schnur","scholle","schrank",
            "schraube","schreck","schrift","schritt","schuld","schule","schulter","schuppe","schutz","schwamm","schwan","schwanz","schwarm","schwein","schwert","see",
            "seele","segel","segen","seide","seife","seil","seite","sekunde","senf","sense","sessel","seuche","sichel","sieb","siegel","signal",
            "silber","sitz","socke","sohle","sohn","sommer","sonne","sorge","spalt","spange","spatz","speck","speiche","speicher","speise","spiegel",
            "spiel","spinne","spitze","splitter","sporn","sport","sprache","sprung","spur","stab","stachel","stadt","stahl","stall","stamm","stand",
            "stange","stapel","start","staub","stein","stelle","stempel","stern","steuer","stich","stiefel","stiel","stift","stimme","stirn","stock",
            "stoff","storch","strand","strasse","strauch","streifen","strick","stroh","strom","strumpf","stuck","stufe","stuhl","stunde","sturm","suche",
            "sumpf","suppe","tabak","tafel","tag","takt","taler","tanne","tante","tanz","tasche","tasse","tatze","tau","taube","taucher",
            "teich","teig","teller","tempel","teppich","tier","tinte","tisch","titel","tochter","topf","tor","torte","tracht","traum","treppe",
            "trick","tritt","tropfen","trost","truhe","truppe","tuch","tulpe","turm","ufer","uhr","umzug","unfall","union","urlaub","vase",
            "vater","veilchen","verse","vieh","vogel","volk","waage","wabe","wache","wagen","wahl","wald","wand","wange","wanze","ware",
            "wasser","watte","wecker","wege","weide","wein","weise","weizen","welle","welt","werk","wert","wespe","westen","wetter","wiese",
            "wild","wind","winter","wipfel","wirbel","wirt","wolf","wolke","wolle","wort","wucht","wunde","wunsch","wurf","wurm","wurst",
            "wurzel","wut","zahl","zahn","zange","zapfen","zaun","zebra","zehe","zeichen","zeile","zeit","zelle","zelt","ziegel","ziege",
            "ziel","zimmer","zinn","zins","zipfel","zitrone","zoll","zone","zopf","zorn","zucker","zug","zunge","zweig","zwiebel","zwilling",
            "adler","alarm","alge","altar","amber","ameise","angel","angst","anzug","arbeit","asche","atem","atlas","atom","auster","azubi",
            "bagger","balken","ballon","banane","bande","barke","baron","bart","basis","bauch","bauer","becher","beere","besen","beule","beutel",
            "biene","birke","bischof","bison","blase","blech","blei","block","bluse","boden","bogen","bohne","boje","bolzen","bombe","bonus",
            "borke","borste","boss","braten","braue","brezel","briefe","bronze","bruder","brunnen","buche","buckel","bunker","burg","bursche","dame",
            "dampf","dank","dattel","deck","delta","dichte","diesel","ding","distel","dolch","donner","doppel","dorn","dreck","drossel","druck",
            "duft","dunkel","echo","ecke","ehre","eidechse","eifer","eingang","einheit","einhorn","elefant","elster","ende","energie","enkel","ernte",
            "essig","etage","export","fach","fackel","fahrer","fahrt","falte","familie","fang","fasan","fehler","feind","felge","ferne","fest",
            "fett","fieber","figur","filter","firma","flagge","flamme","flanke","flechte","flegel","flinte","flocke","flora","flosse","flotte","flucht",
            "folge","form","formel","forum","fracht","frage","frau","freude","freund","friede","frisur","front","fuge","funken","furche","gebet",
            "gebirge","geburt","gecko","gefahr","gehalt","geige","genuss","gepard","gericht","gerste","gesetz","gesicht","gewebe","gewehr","gewicht","gewinn",
            "gewitter","gier","giebel","giraffe","gitarre","glanz","glatze","glaube","glied","globus","glucke","gnade","goblin","gong","gorilla","gott",
            "grad","graf","gramm","granit","grenze","grille","grimm","grotte","grube","gruss","gunst","halm","halter","handel","handy","harfe",
            "harz","hass","hauch","haufen","hebel","heft","heim","held","helm","herberge","herde","herkunft","herr","hilfe","hirse","hobby",
            "hochzeit","hocker","hoehe","hoehle","hoffnung","horizont","huegel","huelle","hummer","humor","husten","idee","imker","impuls","index","inhalt",
            "insekt","irrtum","jacht","jaeger","jaguar","januar","jubel","jugend","juli","juni","juwel","kaefer","kaefig","kaelte","kajak","kakao",
            "kaktus","kalender","kamerad","kamm","kandidat","kanne","kanone","kanu","kapelle","kapital","kapsel","karotte","karriere","kartoffel","kasten","katalog",
            "kater","kaviar","kehle","keil","kerl","kessel","kiesel","kissen","klammer","klasse","klavier","kleber","klemme","klima","klinik","klinke",
            "kloster","kluft","knabe","knecht","knochen","knorpel","koala","kobold","kodex","kolben","kolonie","komfort","kompass","kondor","kontakt","konzept",
            "konzern","konzert","koralle","kordel","korken","krabbe","kranich","kratzer","krawatte","kreatur","kredit","krippe","kristall","kritik","krokodil","kropf",
            "krug","krume","kruste","kuckuck","kuerbis","kueste","kunde","kuppel","kurbel","kurier","kurve","kusine","kutsche","labor","lache","lack",
            "laerm","laib","laie","laken","lakritz","laterne","latte","laube","lawine","leck","lehne","leiste","leopard","lerche","lesung","libelle",
            "liebling","liga","lilie","limit","limo","lineal","lob","locher","logik","lohn","lokal","lorbeer","lord","los","lotse","lotto",
            "luchs","luder","luege","lueke","luke","lump","lunch","lupe","lurch","lust","luxus","macke","made","mafia","magazin","magie",
            "magma","mahnung","mai","makler","makrele","malz","mama","mammut","mandel","mangel","mango","manier","mappe","marder","marine","marke",
            "mars","masche","maschine","maske","masse","matrose","matsch","maul","maurer","meile","meinung","melodie","melone","membran","mensa","mensch",
            "mentor","merkmal","messe","metro","metzger","meute","mieder","miete","mikro","mime","mimik","mimose","mineral","minister","minus","minute",
            "mischung","mission","mist","mixer","mobil","modul","moebel","moench","moeve","molekuel","molke","moment","monarch","monitor","monopol","monster",
            "montag","monteur","moor","moped","mops","moral","morast","morchel","morgen","mosaik","moschee","moskito","most","motiv","motto","mucke",
            "muffel","muehe","muffin","mumie","munition","murmel","muse","museum","musik","muskat","muskel","mythos","nabel","nachbar","nacken","nadel",
            "naehe","nahrung","naht","napf","narkose","narr","nashorn","nation","natron","natter","natur","neapel","neffe","neigung","nektar","neon",
            "neptun","nerv","nessel","neuheit","neuling","neuron","nichte","nickel","niemals","niesen","nihilist","nikotin","nimbus","ninja","nische","nitrat",
            "niveau","nobel","nocke","nomade","nonsens","noppe","norden","norm","notfall","notiz","notruf","novelle","novize","nuance","nugget","null",
            "nummer","nutzen","nylon","nymphe","obelisk","objekt","oblate","oboe","obst","ochse","ocker","odyssee","offerte","oheim","okay","oktave",
            "oktober","oldtimer","olive","omega","omen","onyx","opal","opfer","opium","optik","optimum","option","opus","orakel","orbit","orchidee",
            "ordnung","orient","orkan","ornament","oscar","osmose","ostern","ouzo","oval","oxid","ozean","ozon","pacht","packung","paddel","page",
            "pagode","paket","paladin","palette","pampa","panama","paneel","panne","panorama","panther","panzer","papa","papagei","papaya","papier","paprika",
            "parade","parfum","parka","parkett","parodie","parole","partei","partner","party","pascha","passage","pastor","pathos","patient","patrone","patsche",
            "patzer","pauker","pause","pavian","pazifik","pech","pedal","pegel","pein","peitsche","pelikan","pelz","pendel","penner","pensum","perfekt",
            "pergament","periode","perl","person","pest","petunie","pfad","pfalz","pfeiler","pflege","pflicht","pflug","pfosten","phantom","pharao","phase",
            "philosoph","phoenix","phrase","physik","pianist","pickel","picknick","pieks","pier","pigment","pik","pille","pilot","piment","pinguin","pinie",
            "pink","pinnwand","pionier","pipeline","pirouette","piste","pistole","pixel","pizza","plage","plan","planet","planke","plastik","platin","platte",
            "pleite","plenum","plombe","plural","plus","pluesch","pocken","podest","podium","poem","poesie","poet","pointe","pokal","poker","polemik",
            "polenta","police","politik","polizei","polka","polo","polyp","pomade","pomp","pool","pop","popcorn","pore","portal","portier","portion",
            "porzellan","posaune","pose","position","post","poster","potenz","pracht","predigt","preisgabe","premiere","presse","prestige","priester","primel","prinzip",
            "prise","prisma","privat","problem","produkt","profil","prognose","programm","projekt","prolog","promenade","propeller","prophet","prosa","prospekt","protein",
            "protest","protokoll","proton","proviant","provinz","prozent","prozess","pruefung","pruegel","prunk","psalm","psycho","pub","publikum","pudding","puff",
            "pulle","pulpe","pumps","punker","pupille","purpur","purzel","puste","pustel","pute","putsch","puzzle","pyjama","pyramide","python","quader",
            "quadrat","qual","qualm","quartal","quartett","quartier","quarz","quaste","quatsch","quengel","quer","quetsch","queue","quickie","quirl","quiz",
            "quote","rabbi","rabatt","rabatz","racker","radar","radau","radikale","radium","radius","raffel","rage","ragout","rain","rallye","rambo",
            "ramme","rampe","ramsch","ranch","rang","ranzen","rapier","rapper","raps","raspel","rasse","rassel","raster","rasur","rathaus","ration",
            "ratsche","ratsel","rattan","raub","raubtier","raufe","rauke","rausch","raute","razzia","reaktion","reaktor","realist","rebell","rebhuhn","recherche",
            "rechner","recht","reck","recycling","redaktion","rede","redner","reduktion","reede","referat","referenz","reflex","reform","refrain","regelung","regent",
            "regie","regiment","region","register","regler","reha","reibung","reichtum","reif","reigen","reim","reinigung","reisig","reiz","reklame","rekord",
            "rektor","rekrut","relais","relief","religion","relikt","remis","renaissance","rendite","rennbahn","renner","renovierung","rente","rentier","rentner","reparatur",
            "reportage","reporter","reptil","republik","requiem","reservat","reserve","residenz","resonanz","respekt","rest","resultat","retorte","rettich","rettung","reue",
            "revanche","revier","revolte","revolution","revolver","revue","rezept","rezession","rhein","rhetorik","rheuma","rhythmus","richter","richtung","riege","riemen",
            "riesling","rille","rinde","ringer","rinne","risiko","risotto","ritual","ritze","rivale","roboter","rochade","rochen","rodeo","rodler","rogen",
            "rohling","rokoko","roller","rollstuhl","roman","romantik","romanze","roemer","rondell","rosette","rosine","rosmarin","rotation","rotor","routine","rowdy",
            "rubin","rubrik","ruck","rucksack","rudel","rueffel","rufmord","rugby","ruhm","ruhr","ruin","ruine","rumba","rummel","rumor","rumpelkammer",
            "rundbau","rune","runzel","rupie","ruepel","rusche","russe","ruessel","ruester","ruestung","rute","rutsch","saal","saebel","saege","saenger",
            "saeule","safari","safran","saga","saite","sakko","salami","salon","salto","salut","salve","samba","samstag","sandalen","sanduhr","sardine",
            "sarg","satire","saturn","sauce","saum","sauna","saxofon","scanner","schabe","schaden","schaefer","schaerfe","schale","schall","schanze","schar",
            "schauer","scheich","scheitel","schenkel","scherbe","scherz","scheuche","schieber","schiene","schienbein","schiefer","schiene","schiff","schikane","schildkroete","schimmer",
            "schinken","schlacht","schlacke","schlamm","schlehe","schleim","schlemmer","schlendrian","schlepper","schleuder","schleuse","schlick","schliff","schlinge","schlitten","schlitz",
            "schlosser","schlucker","schlummer","schlund","schlupf","schmalz","schmelz","schmerz","schmied","schmuck","schmutz","schnake","schnalle","schnapps","schnauz","schneeflocke",
            "schneider","schnepfe","schnitzel","schober","schock","schokolade","schoner","schopf","schorle","schoss","schote","schotter","schraege","schramme","schrein","schreiner",
            "schrift","schrot","schrott","schrubber","schrumpf","schub","schublade","schuft","schuh","schulung","schummel","schund","schuppen","schurke","schurz","schuss",
            "schussel","schuster","schwabe","schwaden","schwalbe","schwang","schwarte","schwebe","schwede","schwefel","schweif","schweiger","schweiss","schwelle","schwemme","schwenk",
            "schwester","schwiele","schwindel","schwinge","schwips","schwung","schwur","seal","seehund","seemann","sehne","sehnsucht","seide","seilbahn","seismik","sekret",
            "sekt","semester","seminar","sendung","senior","senke","sensor","sentenz","serbe","serie","serpentin","server","service","serviette","serum","sheriff",
            "shorts","show","shuttle","sibirisch","sicherung","siedlung","sieger","silhouette","silo","simse","single","sinus","sippe","sirup","sitcom","skateboard",
            "skelett","sketch","ski","skizze","skorpion","slalom","slip","slogan","smoking","snack","sockel","software","solist","sonde","sonnenschein","sopran",
            "sosse","souffle","souvenir","sozius","spachtel","spaghetti","spalier","spannung","sparren","spass","spaten","spedition","spektrum","spende","sperling","sperre",
            "sphinx","spickzettel","spind","spiral","spliss","sponsor","spore","spott","spray","sprecherin","springer","sprinkler","spritzer","sprosse","spruch","spuk",
            "spule","spund","squash","staatsanwalt","stadion","staffel","stagnation","stake","standard","stanze","star","stativ","statue","status","steak","steckdose",
            "steg","steigung","stellwerk","steno","steppe","stereo","stethoskop","steward","stickerei","stil","stint","stipendium","stirnband","stockwerk","stoerer","stollen",
            "stolz","stopfen","stoppel","storung","stoss","strafzettel","strahl","strapaze","strategie","streamer","strebe","streber","streitwagen","stress","streusel","strip",
            "strippe","stroh","struktur","strunk","stube","student","studio","studium","stunk","stunt","sturz","stuss","styropor","substanz","suffix","sultan",
            "summe","sumpf","sund","superfood","suppe","surfer","sushi","symbol","symphonie","syndrom","synonym","synthese","syrup","system","tabelle","tablet",
            "tacho","taekwondo","tagebuch","taktik","talent","talisman","talk","tampon","tangente","tango","tanke","tanker","tara","tarif","tarnkappe","tarot",
            "tartan","tartsche","tatar","tatort","tattoo","taufe","taxi","team","technik","teddy","teenager","teekanne","teer","teilung","telefon","teleskop",
            "temperament","tempo","tendenz","tennis","tenor","terminal","terrain","terrasse","terror","tertial","test","textil","theke","thema","theorie","therapie",
            "these","thriller","thron","thunfisch","ticket","tiegel","tiefe","tiefkuehltruhe","tiger","tiki","tilde","timer","tinktur","tip","titan","toast",
            "tobak","toilette","toleranz","tomate","tombola","tonne","tonnen","tontopf","toper","tornado","torpedo","torrent","torso","tortur","tote","totem",
            "toto","toupet","tourist","trabant","trachee","track","trademark","tradition","tragik","trainer","traktor","tram","trampolin","trance","transfer","transit","transport","trapez","trash","trasse","traube","trauma","treffer","trend","tribune","tribut"
        ];

        // Kryptografisch sichere Zufallszahl
        function secureRandom(max) {
            const array = new Uint32Array(1);
            crypto.getRandomValues(array);
            return array[0] % max;
        }

        function getRandomWord() {
            return wordlist[secureRandom(wordlist.length)];
        }

        const separators = ["-", ".", "_", ",", "/", "+", "*", "#", "!", "=", ":", ";", " "];

        function calculateEntropy(wordCount, addNumber, randomSeparator) {
            let entropy = wordCount * Math.log2(wordlist.length);
            if (addNumber) entropy += Math.log2(100);
            if (randomSeparator) entropy += Math.log2(separators.length);
            return Math.round(entropy);
        }

        function generate() {
            const wordCount = parseInt(document.getElementById('wordCount').value);
            const addNumber = document.getElementById('addNumber').checked;
            const randomSeparator = document.getElementById('randomSeparator').checked;
            const capitalize = document.getElementById('capitalize').checked;

            let separator = randomSeparator
                ? separators[secureRandom(separators.length)]
                : document.getElementById('separator').value;

            let words = [];
            for (let i = 0; i < wordCount; i++) {
                let word = getRandomWord();
                if (capitalize) word = word.charAt(0).toUpperCase() + word.slice(1);
                words.push(word);
            }

            let passphrase = words.join(separator);
            let displayHtml = words.map(w => `<span class="word">${w}</span>`).join(`<span class="separator">${separator}</span>`);

            if (addNumber) {
                const num = secureRandom(100);
                const numStr = num.toString().padStart(2, '0');
                passphrase += separator + numStr;
                displayHtml += `<span class="separator">${separator}</span><span class="number">${numStr}</span>`;
            }

            document.getElementById('passphrase').innerHTML = displayHtml;
            document.getElementById('passphrase').dataset.value = passphrase;

            const entropy = calculateEntropy(wordCount, addNumber, randomSeparator);
            document.getElementById('entropyValue').textContent = `${entropy} Bit`;
            document.getElementById('entropyFill').style.width = `${Math.min(100, entropy)}%`;
            document.getElementById('separator').disabled = randomSeparator;
        }

        async function copyToClipboard() {
            const passphrase = document.getElementById('passphrase').dataset.value;
            if (!passphrase) return;

            let success = false;
            try {
                await navigator.clipboard.writeText(passphrase);
                success = true;
            } catch (err) {
                try {
                    const ta = document.createElement('textarea');
                    ta.value = passphrase;
                    ta.style.position = 'fixed';
                    ta.style.left = '-9999px';
                    document.body.appendChild(ta);
                    ta.select();
                    success = document.execCommand('copy');
                    document.body.removeChild(ta);
                } catch (e) {
                    prompt('Passphrase manuell kopieren (Strg+C):', passphrase);
                    success = true;
                }
            }

            if (success) {
                const toast = document.getElementById('copiedToast');
                const area = document.getElementById('outputArea');
                toast.classList.add('show');
                area.classList.add('copied');
                setTimeout(() => {
                    toast.classList.remove('show');
                    area.classList.remove('copied');
                }, 1500);
            }
        }

        document.addEventListener('keydown', (e) => {
            if ((e.key === 'Enter' || e.key === ' ') && document.activeElement.tagName !== 'SELECT') {
                generate();
            }
            if ((e.ctrlKey || e.metaKey) && e.key === 'c') {
                const passphrase = document.getElementById('passphrase').dataset.value;
                if (passphrase && !window.getSelection().toString()) copyToClipboard();
            }
        });

        document.getElementById('wordCount').addEventListener('change', generate);
        document.getElementById('separator').addEventListener('change', generate);
        document.getElementById('addNumber').addEventListener('change', generate);
        document.getElementById('randomSeparator').addEventListener('change', generate);
        document.getElementById('capitalize').addEventListener('change', generate);

        generate();
    </script>
</body>
</html>
